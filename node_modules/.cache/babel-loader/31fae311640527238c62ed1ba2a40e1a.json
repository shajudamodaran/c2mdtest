{"ast":null,"code":"var _jsxFileName = \"/home/developer/Projects/Personal/Doctor-dashboard/Doctor Dash/V9/c2md-web_react/src/components/AppointmentPerson/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Style from \"./AppointmentPerson.module.scss\";\nimport Assets from \"../Layout/Assets\";\nimport { Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport AddMember from \"../AddMember\";\nimport AgeGender from \"../AgeGender\";\nimport { editMember } from \"../../actions/BookAppoinmentAction\";\nimport moment from \"moment\";\nimport { fetch_family_members, fetch_patient_medicalDetails } from \"../../actions/FamilyMembersAction\";\nimport { updateLoginDetails } from '../../actions/LoginAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AppointmentPerson({\n  progressIncrementer,\n  setAddMemeber,\n  setInnerPage,\n  innerPage,\n  appoinment_form,\n  Store_formData\n}) {\n  _s();\n\n  const userData = useSelector(state => state.login);\n  const dispatch = useDispatch();\n  const memberList = useSelector(state => {\n    var _state$bookAppoinment;\n\n    return (_state$bookAppoinment = state.bookAppoinment) === null || _state$bookAppoinment === void 0 ? void 0 : _state$bookAppoinment.familyMember;\n  });\n  const loginData = useSelector(state => state.login);\n  useEffect(() => {\n    document.querySelector(\"body\").scrollTo(0, 0);\n\n    if (memberList.length <= 1) {\n      dispatch(fetch_family_members({\n        userid: userData\n      }));\n    }\n  }, []);\n  const [editDob, setEditDob] = useState(false);\n  let prevMember = memberList[0];\n  const [member, setMember] = useState();\n  useEffect(() => {\n    setMember(prevMember);\n  }, [prevMember]);\n  const errorInit = {\n    gender: false,\n    dob: false,\n    error: false\n  };\n  const [error, setError] = useState(errorInit);\n\n  const selectProfile = member => {\n    setMember(member);\n    setEditDob(true);\n    setInnerPage(1); // if (member.dob == \"\") {\n    //   setEditDob(true);\n    //   setInnerPage(1);\n    // }\n  };\n\n  useEffect(() => {\n    if (editDob && error.error) {\n      let temp = errorInit;\n\n      if (member.gender == \"\") {\n        temp = { ...temp,\n          gender: true,\n          error: true\n        };\n      }\n\n      if (member.dob == \"\") {\n        temp = { ...temp,\n          dob: true,\n          error: true\n        };\n      }\n\n      setError(temp);\n    }\n  }, [member]);\n\n  const editSubmited = () => {\n    let temp = errorInit;\n\n    if (member.gender == \"\") {\n      temp = { ...temp,\n        gender: true,\n        error: true\n      };\n    }\n\n    if (member.dob == \"\") {\n      temp = { ...temp,\n        dob: true,\n        error: true\n      };\n    }\n\n    setError(temp);\n\n    if (temp.error == false) {\n      dispatch(editMember(member));\n      setEditDob(false);\n      setInnerPage(0);\n    }\n  };\n\n  const Continue = () => {\n    if (member.dob == undefined || member.dob == \"\") {\n      setEditDob(true);\n      setInnerPage(1);\n    } else {\n      var _userData$user, _userData$user2;\n\n      dispatch(updateLoginDetails({ ...loginData,\n        user: { ...loginData.user,\n          dob: member.dob\n        }\n      }));\n      dispatch(Store_formData({ ...appoinment_form,\n        firstName: member.relationship == \"self\" ? userData === null || userData === void 0 ? void 0 : (_userData$user = userData.user) === null || _userData$user === void 0 ? void 0 : _userData$user.profileName : member.memberName,\n        relationship: (member === null || member === void 0 ? void 0 : member.id) ? member === null || member === void 0 ? void 0 : member.id : `rel-${member.relationship}`,\n        gender: member.gender,\n        dob: member.dob,\n        appointmentFor: member.relationship == \"self\" ? \"Self\" : \"Loved One\"\n      }));\n      let userID = member.relationship == \"self\" ? userData === null || userData === void 0 ? void 0 : (_userData$user2 = userData.user) === null || _userData$user2 === void 0 ? void 0 : _userData$user2.userId : member === null || member === void 0 ? void 0 : member.id;\n      dispatch(fetch_patient_medicalDetails({\n        userdata: userData === null || userData === void 0 ? void 0 : userData.user,\n        date: appoinment_form,\n        userID: userID\n      }));\n      progressIncrementer();\n    }\n  };\n\n  let getAgeInMonths = dob => {\n    let months = moment().diff(moment(dob, 'DD/MMM/YYYY'), \"months\");\n    let days = moment().diff(moment(dob, 'DD/MMM/YYYY'), \"days\");\n    let result = `${months} months)`;\n\n    if (months <= 0) {\n      result = `${days} days)`;\n    } else {\n      result = `${months} months ${moment(new Date()).date()} days)`;\n    }\n\n    return result;\n  };\n\n  let getAgeInYears = dob => {\n    var _moment$diff;\n\n    let result = (_moment$diff = moment().diff(moment(dob, 'DD/MMM/YYYY'), \"years\")) === null || _moment$diff === void 0 ? void 0 : _moment$diff.toString();\n    return `${result} yrs)`;\n  };\n\n  return innerPage == 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: Style.book_appointment_main_heading,\n      children: [\"Who is this appointment for? \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mandatory\",\n        children: \"*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 38\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Style.memberList,\n      children: [memberList && memberList.length > 0 && memberList.map((memer, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${Style.book_appointment_person_input} ${(member === null || member === void 0 ? void 0 : member.memberName) == memer.memberName && (member === null || member === void 0 ? void 0 : member.id) == memer.id && Style.active}`,\n        onClick: Continue,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.book_appointment_person_img,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Assets.person_icon,\n            className: Style.book_appointment_person_icon_image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: Assets.icon_person_blue,\n            className: Style.book_appointment_person_active_icon_image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: Style.book_appointment_person_input_box,\n          onClick: () => setMember(memer),\n          children: [memer.memberName, \" \", memer.dob && memer.dob != \"\" && `(${memer.gender}, ${moment().diff(moment(memer.dob, 'DD/MMM/YYYY'), \"years\") <= 0 ? getAgeInMonths(memer.dob) : getAgeInYears(memer.dob)}\n                  `]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Assets.pencil_icon,\n          className: Style.book_appointment_pencil_icon_image,\n          onClick: e => {\n            e.stopPropagation();\n            selectProfile(memer);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Assets.blue_edit_icon,\n          className: Style.book_appointment_pencil_active_image,\n          onClick: e => {\n            e.stopPropagation();\n            selectProfile(memer);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.book_appointment_person_input,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.book_appointment_person_img,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Assets.plus_icon,\n            className: Style.book_appointment_person_icon_image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: Assets.icon_plus_blue,\n            className: Style.book_appointment_person_active_icon_image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: Style.book_appointment_person_input_box,\n          onClick: () => {\n            setAddMemeber(true);\n            setInnerPage(innerPage + 1);\n            setEditDob(false);\n          },\n          children: \"For someone else\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Assets.right_arrow_icon,\n          className: Style.book_appointment_pencil_icon_image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Assets.icon_arrow_blue,\n          className: Style.book_appointment_pencil_active_image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true) : !editDob ? /*#__PURE__*/_jsxDEV(AddMember, {\n    setMemberMain: setMember,\n    setInnerPage: setInnerPage,\n    innerPage: innerPage\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: Style.book_appointment_main_heading,\n      children: \"Age & Gender\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AgeGender, {\n      member: member,\n      setMember: setMember,\n      error: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${Style.btn_floating} btn_floating`,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        className: Style.book_appointment_continue_button,\n        onClick: editSubmited,\n        children: \"Continue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(AppointmentPerson, \"HrRJ6WjnsPtG/OlpYhPWBDNJomk=\", false, function () {\n  return [useSelector, useDispatch, useSelector, useSelector];\n});\n\n_c = AppointmentPerson;\nexport default AppointmentPerson;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppointmentPerson\");","map":{"version":3,"sources":["/home/developer/Projects/Personal/Doctor-dashboard/Doctor Dash/V9/c2md-web_react/src/components/AppointmentPerson/index.js"],"names":["React","useState","useEffect","Style","Assets","Button","useDispatch","useSelector","AddMember","AgeGender","editMember","moment","fetch_family_members","fetch_patient_medicalDetails","updateLoginDetails","AppointmentPerson","progressIncrementer","setAddMemeber","setInnerPage","innerPage","appoinment_form","Store_formData","userData","state","login","dispatch","memberList","bookAppoinment","familyMember","loginData","document","querySelector","scrollTo","length","userid","editDob","setEditDob","prevMember","member","setMember","errorInit","gender","dob","error","setError","selectProfile","temp","editSubmited","Continue","undefined","user","firstName","relationship","profileName","memberName","id","appointmentFor","userID","userId","userdata","date","getAgeInMonths","months","diff","days","result","Date","getAgeInYears","toString","book_appointment_main_heading","map","memer","index","book_appointment_person_input","active","book_appointment_person_img","person_icon","book_appointment_person_icon_image","icon_person_blue","book_appointment_person_active_icon_image","book_appointment_person_input_box","pencil_icon","book_appointment_pencil_icon_image","e","stopPropagation","blue_edit_icon","book_appointment_pencil_active_image","plus_icon","icon_plus_blue","right_arrow_icon","icon_arrow_blue","btn_floating","book_appointment_continue_button"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Style from \"./AppointmentPerson.module.scss\";\nimport Assets from \"../Layout/Assets\";\nimport { Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport AddMember from \"../AddMember\";\nimport AgeGender from \"../AgeGender\";\nimport { editMember } from \"../../actions/BookAppoinmentAction\";\nimport moment from \"moment\";\nimport {\n  fetch_family_members,\n  fetch_patient_medicalDetails,\n} from \"../../actions/FamilyMembersAction\";\nimport { updateLoginDetails } from '../../actions/LoginAction';\n\nfunction AppointmentPerson({\n  progressIncrementer,\n  setAddMemeber,\n  setInnerPage,\n  innerPage,\n  appoinment_form,\n  Store_formData,\n}) {\n  const userData = useSelector((state) => state.login);\n\n  const dispatch = useDispatch();\n  const memberList = useSelector((state) => state.bookAppoinment?.familyMember);\n  const loginData = useSelector((state) => state.login);\n\n  useEffect(() => {\n    document.querySelector(\"body\").scrollTo(0, 0);\n    if (memberList.length <= 1) {\n      dispatch(fetch_family_members({ userid: userData }));\n\n    }\n  }, []);\n\n  const [editDob, setEditDob] = useState(false);\n  let prevMember = memberList[0];\n  const [member, setMember] = useState();\n\n  useEffect(() => {\n    setMember(prevMember);\n  }, [prevMember]);\n\n  const errorInit = {\n    gender: false,\n    dob: false,\n    error: false,\n  };\n  const [error, setError] = useState(errorInit);\n\n  const selectProfile = (member) => {\n    setMember(member);\n\n    setEditDob(true);\n    setInnerPage(1);\n\n    // if (member.dob == \"\") {\n    //   setEditDob(true);\n    //   setInnerPage(1);\n    // }\n  };\n\n  useEffect(() => {\n    if (editDob && error.error) {\n      let temp = errorInit;\n      if (member.gender == \"\") {\n        temp = { ...temp, gender: true, error: true };\n      }\n      if (member.dob == \"\") {\n        temp = { ...temp, dob: true, error: true };\n      }\n      setError(temp);\n    }\n  }, [member]);\n\n  const editSubmited = () => {\n    let temp = errorInit;\n    if (member.gender == \"\") {\n      temp = { ...temp, gender: true, error: true };\n    }\n    if (member.dob == \"\") {\n      temp = { ...temp, dob: true, error: true };\n    }\n    setError(temp);\n    if (temp.error == false) {\n\n      dispatch(editMember(member));\n      setEditDob(false);\n      setInnerPage(0);\n    }\n  };\n\n  const Continue = () => {\n    if (member.dob == undefined || member.dob == \"\") {\n      setEditDob(true);\n      setInnerPage(1);\n    } else {\n      dispatch(updateLoginDetails({ ...loginData, user: { ...loginData.user, dob: member.dob } }))\n      dispatch(\n        Store_formData({\n          ...appoinment_form,\n          firstName:\n            member.relationship == \"self\"\n              ? userData?.user?.profileName\n              : member.memberName,\n          relationship: member?.id ? member?.id : `rel-${member.relationship}`,\n          gender: member.gender,\n          dob: member.dob,\n          appointmentFor: member.relationship == \"self\" ? \"Self\" : \"Loved One\",\n        })\n      );\n      let userID =\n        member.relationship == \"self\" ? userData?.user?.userId : member?.id;\n      dispatch(\n        fetch_patient_medicalDetails({\n          userdata: userData?.user,\n          date: appoinment_form,\n          userID: userID,\n        })\n      );\n      progressIncrementer();\n    }\n  };\n\n\n  let getAgeInMonths = (dob) => {\n\n    let months = moment().diff(moment(dob, 'DD/MMM/YYYY'), \"months\")\n    let days = moment().diff(moment(dob, 'DD/MMM/YYYY'), \"days\")\n\n    let result = `${months} months)`\n\n    if (months <= 0) {\n      result = `${days} days)`\n\n    }\n    else {\n\n      result = `${months} months ${moment(new Date()).date()} days)`\n\n    }\n\n\n\n\n\n    return result\n\n  }\n\n  let getAgeInYears = (dob) => {\n\n\n\n    let result = moment()\n      .diff(moment(dob, 'DD/MMM/YYYY'), \"years\")\n      ?.toString()\n\n\n    return `${result} yrs)`\n\n  }\n\n  return innerPage == 0 ? (\n    <>\n      <h3 className={Style.book_appointment_main_heading}>\n        Who is this appointment for? <span className=\"mandatory\">*</span>\n      </h3>\n      <div className={Style.memberList}>\n        {memberList &&\n          memberList.length > 0 &&\n          memberList.map((memer, index) => (\n            <div\n              className={`${Style.book_appointment_person_input} ${(member?.memberName == memer.memberName && member?.id == memer.id) && Style.active\n                }`}\n                onClick={Continue}\n            >\n              <div className={Style.book_appointment_person_img}>\n                <img\n                  src={Assets.person_icon}\n                  className={Style.book_appointment_person_icon_image}\n                ></img>\n                <img\n                  src={Assets.icon_person_blue}\n                  className={Style.book_appointment_person_active_icon_image}\n                ></img>\n              </div>\n\n              <Button\n                className={Style.book_appointment_person_input_box}\n                onClick={() => setMember(memer)}\n              >\n                {memer.memberName}{\" \"}\n                {(memer.dob && memer.dob != \"\") &&\n                  `(${memer.gender}, ${moment()\n                    .diff(moment(memer.dob, 'DD/MMM/YYYY'), \"years\") <= 0 ?\n\n                    getAgeInMonths(memer.dob)\n\n                    :\n\n                    getAgeInYears(memer.dob)\n\n                  }\n                  `}\n              </Button>\n              <img\n                src={Assets.pencil_icon}\n                className={Style.book_appointment_pencil_icon_image}\n                onClick={(e) => {\n                  e.stopPropagation()\n                  selectProfile(memer);\n                }}\n              ></img>\n              <img\n                src={Assets.blue_edit_icon}\n                className={Style.book_appointment_pencil_active_image}\n                onClick={(e) => {\n                  e.stopPropagation()\n                  selectProfile(memer);\n                }}\n              ></img>\n            </div>\n          ))}\n\n        <div className={Style.book_appointment_person_input}>\n          <div className={Style.book_appointment_person_img}>\n            <img\n              src={Assets.plus_icon}\n              className={Style.book_appointment_person_icon_image}\n            ></img>\n            <img\n              src={Assets.icon_plus_blue}\n              className={Style.book_appointment_person_active_icon_image}\n            ></img>\n          </div>\n          <Button\n            className={Style.book_appointment_person_input_box}\n            onClick={() => {\n              setAddMemeber(true);\n              setInnerPage(innerPage + 1);\n              setEditDob(false);\n            }}\n          >\n            For someone else\n          </Button>\n          <img\n            src={Assets.right_arrow_icon}\n            className={Style.book_appointment_pencil_icon_image}\n          ></img>\n          <img\n            src={Assets.icon_arrow_blue}\n            className={Style.book_appointment_pencil_active_image}\n          ></img>\n        </div>\n      </div>\n\n      {/* <div className={`${Style.btn_floating} btn_floating`}>\n        <Button\n          className={Style.book_appointment_continue_button}\n          onClick={Continue}\n        >\n          Continue\n        </Button>\n      </div> */}\n    </>\n  ) : !editDob ? (\n    <AddMember setMemberMain={setMember} setInnerPage={setInnerPage} innerPage={innerPage} />\n  ) : (\n    <>\n      <h3 className={Style.book_appointment_main_heading}>Age & Gender</h3>\n      <AgeGender member={member} setMember={setMember} error={error} />\n      <div className={`${Style.btn_floating} btn_floating`}>\n        <Button\n          className={Style.book_appointment_continue_button}\n          onClick={editSubmited}\n        >\n          Continue\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default AppointmentPerson;\n"]},"metadata":{},"sourceType":"module"}