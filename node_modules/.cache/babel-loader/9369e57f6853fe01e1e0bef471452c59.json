{"ast":null,"code":"var _formatTime;\n\nimport { CHECK_CONSULTATION, FETCH_CLIENTDETAILS, FETCH_COUNTRYDATA } from \"./type\";\nimport loginedApi from \"../apis\";\nimport moment from \"moment\";\n\nconst {\n  detect\n} = require('detect-browser');\n\nconst browser = detect();\nlet platform = window.navigator.platform;\nlet userAgent = window.navigator.userAgent;\nlet off = new Date().toString().replace(/GMT\\+(\\d\\d)(\\d\\d)/, \"GMT+$1:$2\");\nlet formatTime = off === null || off === void 0 ? void 0 : off.split(\"GMT\")[1].split(\" (\")[0];\nlet result = (_formatTime = formatTime) === null || _formatTime === void 0 ? void 0 : _formatTime.slice(1);\n\nif (formatTime.search(/\\+/g) != null) {\n  formatTime = formatTime.replace(/\\+/g, \"%2B\");\n} else if (formatTime.search(/\\-/g) != null) {\n  formatTime = formatTime.replace(/\\-/g, \"%2D\");\n} //replace(/\\+/g,' ') browserTimeZone: `GMT${formatTime}`\n\n\nexport const fetch_clientDetails = clinicId => async dispatch => {\n  let params = {\n    requestType: \"1036\",\n    token: \"C2MDVerificationToken\",\n    data: {\n      browserTimeZone: `GMT${formatTime}`,\n      currency: \"INR\",\n      accessCountry: \"IN\",\n      todayRate: \"\",\n      clinicId: clinicId\n    }\n  };\n\n  if (clinicId != \"\") {\n    params.data.clinicId = clinicId;\n  }\n\n  const response = await loginedApi.post(\"getclinicdetails\", params); //localStorage.setItem(\"ClinicDetails\",response.data.data);\n\n  console.log(\"Calling.....................\", params);\n  console.log(\"Response.....................\", response);\n  await localStorage.setItem(\"ClinicDetails\", JSON.stringify(response.data.data));\n  dispatch({\n    type: FETCH_CLIENTDETAILS,\n    payload: response.data.data\n  });\n  getCountryData();\n};\nexport const check_consultation = userData => async dispatch => {\n  let today = moment(new Date()).format(\"DD-MMM-YYYY\");\n  let resp = await loginedApi.post(\"getcountrycode\", {\n    \"token\": \"token\",\n    \"version\": \"2.0\",\n    \"data\": {\n      browserTimeZone: `GMT${formatTime}`\n    },\n    \"requestType\": 1058\n  });\n  const doctorscountrycode = resp.data.data;\n  let paramAppoint = {\n    \"requestType\": \"65\",\n    \"token\": \"C2MDVerificationToken\",\n    \"data\": {\n      \"patientId\": userData === null || userData === void 0 ? void 0 : userData.userId,\n      \"patientEmail\": userData === null || userData === void 0 ? void 0 : userData.userId,\n      \"patientMobile\": userData === null || userData === void 0 ? void 0 : userData.mobileNumber,\n      \"dayOfAppointment\": today,\n      \"appointmentNavigation\": \"start\",\n      \"todayRate\": \"74.45000\",\n      browserTimeZone: `GMT${formatTime}`,\n      Ipaddress: doctorscountrycode.Ipaddress,\n      useragent: userAgent,\n      Browser: browser.name + \" \" + browser.version,\n      appname: \"C2MD Web\",\n      Os: platform,\n      currency: doctorscountrycode.currency,\n      accessCountry: doctorscountrycode.Country\n    }\n  };\n  const response = await loginedApi.post(\"appointments\", paramAppoint); //localStorage.setItem(\"ClinicDetails\",response.data.data);\n\n  if (response.data.data) {\n    dispatch({\n      type: CHECK_CONSULTATION,\n      payload: response.data.data\n    });\n  }\n};\nexport const getCountryData = () => async dispatch => {\n  const res = await loginedApi.post(\"getcountrycode\", {\n    \"token\": \"token\",\n    \"version\": \"2.0\",\n    \"data\": {\n      browserTimeZone: `GMT${formatTime}`\n    },\n    \"requestType\": 1058\n  });\n\n  if (res.status === 200) {\n    dispatch({\n      type: FETCH_COUNTRYDATA,\n      payload: res.data.data\n    });\n  }\n}; // if (userData.userId && userData.userName && userData.mobileNumber && dashboardData?.dayOfAppointment) {\n//   let paramAppoint = {\n//     \"requestType\": \"65\",\n//     \"token\": \"C2MDVerificationToken\",\n//     \"data\":\n//     {\n//       \"patientId\": userData.userId,\n//       \"patientEmail\": userData.userName,\n//       \"patientMobile\": userData.mobileNumber,\n//       \"browserTimeZone\": \"GMT%2B05:30\",\n//       \"dayOfAppointment\": dashboardData.dayOfAppointment,\n//       \"currency\": \"INR\",\n//       \"accessCountry\": \"IN\",\n//       \"todayRate\": \"74.45000\",\n//       \"Ipaddress\": {},\n//       \"useragent\": \"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.81 Mobile Safari/537.36\", \"Browser\": \"Chrome-95.0.4638.69\", \"Os\": \"Win32\"\n//     }\n//   }\n//   const response = await loginedApi.post(\"appointments\", paramAppoint);\n//   //localStorage.setItem(\"ClinicDetails\",response.data.data);\n//   dispatch({ type: CHECK_CONSULTATION, payload: response.data.data });\n// }\n// else {\n//   console.log(\"Api call check_consultation not completed because of incomplete parameters\");\n// }","map":{"version":3,"sources":["/home/developer/Projects/Personal/Doctor-dashboard/BITBUCKET/New/c2md-web_react/src/actions/MicrositeAction.js"],"names":["CHECK_CONSULTATION","FETCH_CLIENTDETAILS","FETCH_COUNTRYDATA","loginedApi","moment","detect","require","browser","platform","window","navigator","userAgent","off","Date","toString","replace","formatTime","split","result","slice","search","fetch_clientDetails","clinicId","dispatch","params","requestType","token","data","browserTimeZone","currency","accessCountry","todayRate","response","post","console","log","localStorage","setItem","JSON","stringify","type","payload","getCountryData","check_consultation","userData","today","format","resp","doctorscountrycode","paramAppoint","userId","mobileNumber","Ipaddress","useragent","Browser","name","version","appname","Os","Country","res","status"],"mappings":"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","sourcesContent":["import { CHECK_CONSULTATION, FETCH_CLIENTDETAILS, FETCH_COUNTRYDATA } from \"./type\";\nimport loginedApi from \"../apis\";\nimport moment from \"moment\";\nconst { detect } = require('detect-browser');\nconst browser = detect();\nlet platform = window.navigator.platform;\nlet userAgent = window.navigator.userAgent;\nlet off = new Date().toString().replace(/GMT\\+(\\d\\d)(\\d\\d)/, \"GMT+$1:$2\");\nlet formatTime = off?.split(\"GMT\")[1].split(\" (\")[0];\nlet result = formatTime?.slice(1);\nif (formatTime.search(/\\+/g) != null) {\n  formatTime = formatTime.replace(/\\+/g, \"%2B\")\n} else if (formatTime.search(/\\-/g) != null) {\n  formatTime = formatTime.replace(/\\-/g, \"%2D\")\n}//replace(/\\+/g,' ') browserTimeZone: `GMT${formatTime}`\n\nexport const fetch_clientDetails = (clinicId) => async (dispatch) => {\n\n\n\n  let params = {\n    requestType: \"1036\",\n    token: \"C2MDVerificationToken\",\n    data: {\n      browserTimeZone: `GMT${formatTime}`,\n      currency: \"INR\",\n      accessCountry: \"IN\",\n      todayRate: \"\",\n      clinicId: clinicId,\n    },\n  };\n  if (clinicId != \"\") {\n    params.data.clinicId = clinicId;\n  }\n\n  const response = await loginedApi.post(\"getclinicdetails\", params);\n  //localStorage.setItem(\"ClinicDetails\",response.data.data);\n\n  console.log(\"Calling.....................\",params);\n  console.log(\"Response.....................\",response);\n\n  await localStorage.setItem(\"ClinicDetails\", JSON.stringify(response.data.data));\n  dispatch({ type: FETCH_CLIENTDETAILS, payload: response.data.data });\n  getCountryData();\n};\n\n\n\nexport const check_consultation = (userData) => async (dispatch) => {\n\nlet today= moment(new Date()).format(\"DD-MMM-YYYY\")\n\nlet resp = await loginedApi.post(\"getcountrycode\", \n  {\n    \"token\": \"token\",\n    \"version\":\"2.0\",\n    \"data\": {browserTimeZone: `GMT${formatTime}`},\n    \"requestType\": 1058\n});\nconst doctorscountrycode = resp.data.data;\n\n  let paramAppoint =\n  {\n    \"requestType\": \"65\",\n    \"token\": \"C2MDVerificationToken\",\n    \"data\":\n    {\n      \"patientId\": userData?.userId,\n      \"patientEmail\": userData?.userId,\n      \"patientMobile\": userData?.mobileNumber,\n     \n      \"dayOfAppointment\": today,\n      \"appointmentNavigation\": \"start\",\n       \"todayRate\": \"74.45000\",\n       browserTimeZone: `GMT${formatTime}`,\n\t\t\tIpaddress: doctorscountrycode.Ipaddress, \n            useragent: userAgent,\n            Browser: browser.name+\" \"+browser.version,\n            appname: \"C2MD Web\",\n            Os: platform ,\n            currency: doctorscountrycode.currency,\n            accessCountry: doctorscountrycode.Country,\n   }\n  }\n\n\n  const response = await loginedApi.post(\"appointments\", paramAppoint);\n  //localStorage.setItem(\"ClinicDetails\",response.data.data);\n\n \n\n  if (response.data.data) {\n\n    dispatch({ type: CHECK_CONSULTATION, payload: response.data.data });\n  }\n\n};\n\n\n\nexport const getCountryData = () => async (dispatch) => {\n \n \n\n  const res = await loginedApi.post(\"getcountrycode\", \n  {\n    \"token\": \"token\",\n    \"version\":\"2.0\",\n    \"data\": { browserTimeZone: `GMT${formatTime}`,},\n    \"requestType\": 1058\n});\n\n\n  if (res.status === 200) {\n\n\n    dispatch({ type: FETCH_COUNTRYDATA, payload: res.data.data });\n  }\n\n\n};\n\n\n\n\n\n// if (userData.userId && userData.userName && userData.mobileNumber && dashboardData?.dayOfAppointment) {\n\n//   let paramAppoint = {\n//     \"requestType\": \"65\",\n//     \"token\": \"C2MDVerificationToken\",\n//     \"data\":\n//     {\n//       \"patientId\": userData.userId,\n//       \"patientEmail\": userData.userName,\n//       \"patientMobile\": userData.mobileNumber,\n//       \"browserTimeZone\": \"GMT%2B05:30\",\n//       \"dayOfAppointment\": dashboardData.dayOfAppointment,\n//       \"currency\": \"INR\",\n//       \"accessCountry\": \"IN\",\n//       \"todayRate\": \"74.45000\",\n//       \"Ipaddress\": {},\n//       \"useragent\": \"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.81 Mobile Safari/537.36\", \"Browser\": \"Chrome-95.0.4638.69\", \"Os\": \"Win32\"\n//     }\n//   }\n\n//   const response = await loginedApi.post(\"appointments\", paramAppoint);\n//   //localStorage.setItem(\"ClinicDetails\",response.data.data);\n\n//   dispatch({ type: CHECK_CONSULTATION, payload: response.data.data });\n\n// }\n// else {\n//   console.log(\"Api call check_consultation not completed because of incomplete parameters\");\n\n// }"]},"metadata":{},"sourceType":"module"}