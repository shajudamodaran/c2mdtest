{"ast":null,"code":"var _jsxFileName = \"/home/developer/Projects/Personal/Doctor-dashboard/Doctor Dash/V9/c2md-web_react/src/components/UploadReports/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport Style from \"./UploadReports.module.scss\";\nimport YesNoButton from \"../YesNoButton\";\nimport Assets from \"../Layout/Assets\";\nimport { Accordion, Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport { FileDrop } from \"react-file-drop\";\nimport { fetch_Uploaded_files } from \"../../actions/FamilyMembersAction\";\nimport { toast } from \"react-toastify\";\nimport ConfirmModal from \"./ConfirmModal\";\nimport { getFileTypeFromFileName } from \"../../Helpers/FileHelper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction UploadReports({\n  progressIncrementer,\n  appoinment_form,\n  Store_formData\n}) {\n  _s();\n\n  var _appoinment_form$repo;\n\n  const fileInputRef = useRef(null);\n  const [error, setError] = useState(false);\n  const [deleteItems, setDeleteItem] = useState(\"\");\n  const [errorLimit, setErrorLimit] = useState(false);\n  const userData = useSelector(state => state.login);\n  const [toastOpen, setToastOpen] = useState(false);\n  const uploadedData = useSelector(state => {\n    var _state$bookAppoinment;\n\n    return (_state$bookAppoinment = state.bookAppoinment.uploadedData) === null || _state$bookAppoinment === void 0 ? void 0 : _state$bookAppoinment.reportList;\n  });\n  const [showModal, setShowModal] = useState(false);\n  const [fileItem, setFileName] = useState([]);\n  const [uploads, setUploads] = useState(appoinment_form === null || appoinment_form === void 0 ? void 0 : appoinment_form.reportsArray);\n  const [selectedFiles, setSelectedFiles] = useState(appoinment_form.selectedFiles ? appoinment_form.selectedFiles : []); // console.log(selectedFiles,\"this is aupted\")\n\n  useEffect(() => {\n    var _userData$user;\n\n    dispatch(fetch_Uploaded_files({\n      userId: userData === null || userData === void 0 ? void 0 : (_userData$user = userData.user) === null || _userData$user === void 0 ? void 0 : _userData$user.userId\n    }));\n    document.querySelector(\"body\").scrollTo(0, 0);\n  }, []);\n  const dispatch = useDispatch();\n  const [reports, setReports] = useState({\n    flag: (appoinment_form === null || appoinment_form === void 0 ? void 0 : (_appoinment_form$repo = appoinment_form.reportsArray) === null || _appoinment_form$repo === void 0 ? void 0 : _appoinment_form$repo.length) > 0 ? \"Yes\" : \"\",\n    url: \"\"\n  });\n  const [showError, setShowError] = useState(false);\n\n  const onTargetClick = () => {\n    fileInputRef.current.click();\n  };\n\n  const yes_btn_Change = () => {\n    setReports({ ...reports,\n      flag: \"Yes\"\n    });\n  };\n\n  const No_btn_Change = () => {\n    setReports({ ...reports,\n      flag: \"No\"\n    });\n    progressIncrementer();\n  };\n\n  const Continue = () => {\n    let NewArry = fileItem.push(appoinment_form.reports);\n\n    if ((uploads === null || uploads === void 0 ? void 0 : uploads.length) >= 1 || selectFiles.length >= 1) {\n      setShowError(false);\n      dispatch(Store_formData({ ...appoinment_form,\n        reports: fileItem === null || fileItem === void 0 ? void 0 : fileItem.toString(),\n        reportsArray: uploads,\n        selectedFiles: selectedFiles\n      }));\n      progressIncrementer();\n    } else {\n      setShowError(true);\n    }\n  };\n\n  const onFileChange = file => {\n    // const file = e.target.files[0];\n    let imgSize = parseFloat((file === null || file === void 0 ? void 0 : file.size) / (1024 * 1024)).toFixed(2);\n\n    if (uploads.length <= 4) {\n      if (imgSize < 5) {\n        setError(false);\n        const formData = new FormData();\n        formData.append(\"name\", file.name);\n        formData.append(\"file\", file);\n        axios.post(\"https://uat.c2mdr.com/c2mydrrestdemo/v1/c2mdapi/reportsuploads\", formData, {}).then(res => {\n          var _res$data$data$fileNa;\n\n          console.log(res);\n          let imgname = (_res$data$data$fileNa = res.data.data.fileName) === null || _res$data$data$fileNa === void 0 ? void 0 : _res$data$data$fileNa.split(\"!\");\n          setFileName([...fileItem, res.data && res.data.data.fileName]);\n          setShowError(false);\n          setUploads([...uploads, {\n            title: imgname[0],\n            uploaded: moment().format(\"DD-MM-YYYY\"),\n            status: true,\n            resName: res.data.data.fileName\n          }]);\n        }).catch(error => {});\n      } else {\n        setError(true);\n      }\n    } else {\n      if (!toastOpen) {\n        toast.error(\"Only 5 files are allowed to upload\", {\n          position: toast.POSITION.TOP_CENTER,\n          hideProgressBar: true,\n          onOpen: props => setToastOpen(true),\n          onClose: props => setToastOpen(false)\n        });\n      }\n    }\n  };\n\n  const fileUpload = event => {\n    let files = [...event.dataTransfer.files];\n  };\n\n  const deleteUploads = item => {\n    setShowModal(true);\n    setDeleteItem(item);\n  };\n\n  const onCancel = item => {\n    axios.post(\"https://uat.c2mdr.com/c2mydrrestdemo/v1/c2mdapi/removereports\", {\n      requestType: 596,\n      token: \"C2MDVerificationToken\",\n      data: {\n        filename: item === null || item === void 0 ? void 0 : item.title\n      }\n    }).then(res => {\n      // if (res.data.info === \"Success\") {\n      let filter1 = uploads.filter(obj => {\n        return obj.title != item.title;\n      });\n      let filter2 = fileItem.filter(value => {\n        return value != item.resName;\n      });\n      setUploads(filter1);\n      setFileName(filter2);\n      dispatch(Store_formData({ ...appoinment_form,\n        reports: filter2 === null || filter2 === void 0 ? void 0 : filter2.toString(),\n        reportsArray: filter1\n      }));\n      setShowModal(false); // } else {\n      // }\n    }).catch(error => {});\n  };\n\n  const selectFiles = (file, index) => {\n    if (selectedFiles.includes(file)) {\n      let x = [...selectedFiles];\n      x = x.filter(function (el) {\n        return el.filename != file.filename;\n      });\n      let y = [...fileItem];\n      y = y.filter(function (el) {\n        return el.filename != file.filename;\n      });\n      setSelectedFiles(x);\n      setFileName(y);\n    } else {\n      setSelectedFiles([...selectedFiles, file]);\n      setFileName([...fileItem, file.filename]); // setUploads([\n      //   ...uploads,\n      //   {\n      //     title: file.filename,\n      //     uploaded: moment().format(\"DD-MM-YYYY\"),\n      //     status: true,\n      //     resName: res.data.data.fileName,\n      //   },\n      // ]);\n    }\n  };\n\n  const isSelected = file => {\n    // console.log(selectedFiles,file)\n    // selectedFiles.filter(function(el) { return el.filename == file.filename })\n    if (selectedFiles.some(item => item.filename === file.filename && item.uploadRefId == file.uploadRefId)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  let convertExtensionToSmall = name => {\n    if (name) {\n      let format = name.split('.').pop().toLowerCase();\n      return format;\n    }\n  };\n\n  console.log(uploads, selectedFiles);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: Style.upload_reports_main_heading,\n      children: \"Do you have any reports to upload?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(YesNoButton, {\n      yes_btn_Change: yes_btn_Change,\n      No_btn_Change: No_btn_Change,\n      flag: reports.flag\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this), reports.flag === \"Yes\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Accordion, {\n        defaultActiveKey: \"1\",\n        className: `${Style.upload_reports_accordion_align}`,\n        children: [/*#__PURE__*/_jsxDEV(Accordion.Item, {\n          eventKey: \"0\",\n          className: `${(uploads === null || uploads === void 0 ? void 0 : uploads.length) == 0 && Style.noFiles}`,\n          children: [/*#__PURE__*/_jsxDEV(Accordion.Body, {\n            children: [uploads && uploads.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: Style.upload_reports_location_content_selected,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: Style.upload_reports_count,\n                  children: index + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: getFileTypeFromFileName(item.title),\n                  className: Style.upload_reports_pdf_icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: Style.upload_reports_dropdown_content,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: item.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: Style.upload_reports_description,\n                    children: [item.title, \" - \", item.uploaded]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"figure\", {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: Assets.tick_icon,\n                    className: Style.upload_reports_tick_icon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"figure\", {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: Assets.deleteIcon,\n                    className: Style.upload_reports_Delete_icon,\n                    onClick: () => deleteUploads(item)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 23\n              }, this);\n            }), console.log(selectedFiles, uploads), selectedFiles && selectedFiles.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: Style.upload_reports_location_content_selected,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: Style.upload_reports_count,\n                  children: index + uploads.length + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: getFileTypeFromFileName(item.filename),\n                  className: Style.upload_reports_pdf_icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: Style.upload_reports_dropdown_content,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: item.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: Style.upload_reports_description,\n                    children: [item.filename, \" - \", item.dateOfReport]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"figure\", {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: Assets.tick_icon,\n                    className: Style.upload_reports_tick_icon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"figure\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 23\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Accordion.Header, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.upload_button,\n              onClick: () => {\n                fileInputRef.current.click();\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                id: \"upload\",\n                accept: \".png, .jpg, .pdf\",\n                ref: fileInputRef,\n                onChange: e => {\n                  onFileChange(e.target.files[0]);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FileDrop, {\n                onFrameDragEnter: event => console.log(\"onFrameDragEnter\", event),\n                onFrameDragLeave: event => console.log(\"onFrameDragLeave\", event),\n                onFrameDrop: event => console.log(\"onFrameDrop\", event),\n                onDragOver: event => console.log(\"onDragOver\", event),\n                onDragLeave: event => console.log(\"onDragLeave\", event),\n                onDrop: (files, event) => {\n                  onFileChange(files[0]);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  for: \"upload\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: Assets.file_icon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 345,\n                    columnNumber: 23\n                  }, this), \"Open Files\", \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: Style.imageFormat,\n                  children: \"(Supported formats - PDF, PNG, JPEG, JPG, DOC, DOCX, DCM, ZIP. File limits - 5 files of 5MB per file)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Accordion.Item, {\n          eventKey: \"2\",\n          className: `${(uploadedData === null || uploadedData === void 0 ? void 0 : uploadedData.length) == 0 && Style.noFiles}`,\n          children: [/*#__PURE__*/_jsxDEV(Accordion.Header, {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: Style.upload_reports_location_heading,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: Assets.upload_icon,\n                className: Style.upload_reports_upload_icon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: Style.upload_reports_dropdown_heading,\n                children: [\"From My Uploads (\", uploadedData === null || uploadedData === void 0 ? void 0 : uploadedData.length, /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: Style.reportsText,\n                  children: \"reports\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 21\n                }, this), \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Accordion.Body, {\n            children: uploadedData && uploadedData.map((item, index) => {\n              if (item.filename && item.filename != ',') {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `${Style.upload_reports_location_content_selected} ${isSelected(item) && Style.active}`,\n                  onClick: () => {\n                    selectFiles(item, index);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: Style.upload_reports_count,\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 387,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: getFileTypeFromFileName(item.filename),\n                    className: Style.upload_reports_pdf_icon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 390,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: Style.upload_reports_dropdown_content,\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        textTransform: \"none\"\n                      },\n                      children: item.filename.toLowerCase()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 395,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: Style.upload_reports_description,\n                      style: {\n                        textTransform: \"none\"\n                      },\n                      children: [`Uploaded on - `, item.dateOfReport]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 396,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 394,\n                    columnNumber: 27\n                  }, this), isSelected(item) && /*#__PURE__*/_jsxDEV(\"figure\", {\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: Assets.tick_icon,\n                      className: Style.upload_reports_tick_icon\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 401,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 400,\n                    columnNumber: 48\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 25\n                }, this);\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"p\", {\n          className: Style.ShowErrormsg,\n          children: \"Please select image size less than 5 MB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 13\n      }, this), showError && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"p\", {\n          className: Style.ShowErrormsg,\n          children: \"Please upload report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${Style.btn_floating} btn_floating`,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: Style.upload_reports_continue_button,\n          onClick: progressIncrementer,\n          onClick: Continue,\n          children: \"Continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(ConfirmModal, {\n      showModal: showModal,\n      setShowModal: setShowModal,\n      onCancel: onCancel,\n      deleteItems: deleteItems\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(UploadReports, \"fD4hHsd9szJD1b8IMByjsn3qVe8=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = UploadReports;\nexport default UploadReports;\n\nvar _c;\n\n$RefreshReg$(_c, \"UploadReports\");","map":{"version":3,"sources":["/home/developer/Projects/Personal/Doctor-dashboard/Doctor Dash/V9/c2md-web_react/src/components/UploadReports/index.js"],"names":["React","useState","useEffect","useRef","Style","YesNoButton","Assets","Accordion","Button","useDispatch","useSelector","moment","axios","FileDrop","fetch_Uploaded_files","toast","ConfirmModal","getFileTypeFromFileName","UploadReports","progressIncrementer","appoinment_form","Store_formData","fileInputRef","error","setError","deleteItems","setDeleteItem","errorLimit","setErrorLimit","userData","state","login","toastOpen","setToastOpen","uploadedData","bookAppoinment","reportList","showModal","setShowModal","fileItem","setFileName","uploads","setUploads","reportsArray","selectedFiles","setSelectedFiles","dispatch","userId","user","document","querySelector","scrollTo","reports","setReports","flag","length","url","showError","setShowError","onTargetClick","current","click","yes_btn_Change","No_btn_Change","Continue","NewArry","push","selectFiles","toString","onFileChange","file","imgSize","parseFloat","size","toFixed","formData","FormData","append","name","post","then","res","console","log","imgname","data","fileName","split","title","uploaded","format","status","resName","catch","position","POSITION","TOP_CENTER","hideProgressBar","onOpen","props","onClose","fileUpload","event","files","dataTransfer","deleteUploads","item","onCancel","requestType","token","filename","filter1","filter","obj","filter2","value","index","includes","x","el","y","isSelected","some","uploadRefId","convertExtensionToSmall","pop","toLowerCase","upload_reports_main_heading","upload_reports_accordion_align","noFiles","map","upload_reports_location_content_selected","upload_reports_count","upload_reports_pdf_icon","upload_reports_dropdown_content","upload_reports_description","tick_icon","upload_reports_tick_icon","deleteIcon","upload_reports_Delete_icon","dateOfReport","upload_button","e","target","file_icon","imageFormat","upload_reports_location_heading","upload_icon","upload_reports_upload_icon","upload_reports_dropdown_heading","reportsText","active","textTransform","ShowErrormsg","btn_floating","upload_reports_continue_button"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Style from \"./UploadReports.module.scss\";\nimport YesNoButton from \"../YesNoButton\";\nimport Assets from \"../Layout/Assets\";\nimport { Accordion, Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport { FileDrop } from \"react-file-drop\";\nimport { fetch_Uploaded_files } from \"../../actions/FamilyMembersAction\";\nimport { toast } from \"react-toastify\";\nimport ConfirmModal from \"./ConfirmModal\";\nimport { getFileTypeFromFileName } from \"../../Helpers/FileHelper\";\nfunction UploadReports({\n  progressIncrementer,\n  appoinment_form,\n  Store_formData,\n}) {\n  const fileInputRef = useRef(null);\n  const [error, setError] = useState(false);\n  const [deleteItems, setDeleteItem] = useState(\"\");\n  const [errorLimit, setErrorLimit] = useState(false);\n  const userData = useSelector((state) => state.login);\n  const [toastOpen, setToastOpen] = useState(false);\n  const uploadedData = useSelector(\n    (state) => state.bookAppoinment.uploadedData?.reportList\n  );\n  const [showModal, setShowModal] = useState(false);\n\n  const [fileItem, setFileName] = useState([]);\n  const [uploads, setUploads] = useState(appoinment_form?.reportsArray);\n  const [selectedFiles, setSelectedFiles] = useState(appoinment_form.selectedFiles ? appoinment_form.selectedFiles : []);\n  // console.log(selectedFiles,\"this is aupted\")\n  useEffect(() => {\n    dispatch(fetch_Uploaded_files({ userId: userData?.user?.userId }));\n    document.querySelector(\"body\").scrollTo(0, 0);\n  }, []);\n  const dispatch = useDispatch();\n  const [reports, setReports] = useState({\n    flag: appoinment_form?.reportsArray?.length > 0 ? \"Yes\" : \"\",\n    url: \"\",\n  });\n\n  const [showError, setShowError] = useState(false);\n  const onTargetClick = () => {\n    fileInputRef.current.click();\n  };\n\n  const yes_btn_Change = () => {\n    setReports({ ...reports, flag: \"Yes\" });\n  };\n  const No_btn_Change = () => {\n    setReports({ ...reports, flag: \"No\" });\n    progressIncrementer();\n  };\n\n  const Continue = () => {\n    let NewArry = fileItem.push(appoinment_form.reports);\n\n    if (uploads?.length >= 1 || selectFiles.length >= 1) {\n      setShowError(false);\n      dispatch(\n        Store_formData({\n          ...appoinment_form,\n          reports: fileItem?.toString(),\n          reportsArray: uploads,\n          selectedFiles: selectedFiles\n        })\n      );\n      progressIncrementer();\n    } else {\n      setShowError(true);\n    }\n  };\n\n  const onFileChange = (file) => {\n    // const file = e.target.files[0];\n\n    let imgSize = parseFloat(file?.size / (1024 * 1024)).toFixed(2);\n\n    if (uploads.length <= 4) {\n      if (imgSize < 5) {\n        setError(false);\n        const formData = new FormData();\n        formData.append(\"name\", file.name);\n        formData.append(\"file\", file);\n\n        axios\n          .post(\n            \"https://uat.c2mdr.com/c2mydrrestdemo/v1/c2mdapi/reportsuploads\",\n            formData,\n            {}\n          )\n          .then((res) => {\n\n            console.log(res);\n            let imgname = res.data.data.fileName?.split(\"!\");\n\n            setFileName([...fileItem, res.data && res.data.data.fileName]);\n            setShowError(false);\n            setUploads([\n              ...uploads,\n              {\n                title: imgname[0],\n                uploaded: moment().format(\"DD-MM-YYYY\"),\n                status: true,\n                resName: res.data.data.fileName,\n              },\n            ]);\n          })\n          .catch((error) => { });\n      } else {\n        setError(true);\n      }\n    } else {\n      if (!toastOpen) {\n        toast.error(\"Only 5 files are allowed to upload\", {\n          position: toast.POSITION.TOP_CENTER,\n          hideProgressBar: true,\n          onOpen: (props) => setToastOpen(true),\n          onClose: (props) => setToastOpen(false),\n        });\n      }\n    }\n  };\n\n  const fileUpload = (event) => {\n    let files = [...event.dataTransfer.files];\n  };\n  const deleteUploads = (item) => {\n    setShowModal(true);\n    setDeleteItem(item);\n  };\n  const onCancel = (item) => {\n    axios\n      .post(\n        \"https://uat.c2mdr.com/c2mydrrestdemo/v1/c2mdapi/removereports\",\n\n        {\n          requestType: 596,\n          token: \"C2MDVerificationToken\",\n          data: { filename: item?.title },\n        }\n      )\n      .then((res) => {\n        // if (res.data.info === \"Success\") {\n\n        let filter1 = uploads.filter((obj) => {\n          return obj.title != item.title;\n        });\n        let filter2 = fileItem.filter((value) => {\n          return value != item.resName;\n        });\n        setUploads(filter1);\n        setFileName(filter2);\n        dispatch(\n          Store_formData({\n            ...appoinment_form,\n            reports: filter2?.toString(),\n            reportsArray: filter1,\n          })\n        );\n        setShowModal(false);\n        // } else {\n        // }\n      })\n      .catch((error) => { });\n  };\n\n  const selectFiles = (file, index) => {\n\n    if (selectedFiles.includes(file)) {\n      let x = [...selectedFiles]\n      x = x.filter(function (el) { return el.filename != file.filename })\n      let y = [...fileItem]\n      y = y.filter(function (el) { return el.filename != file.filename })\n      setSelectedFiles(x)\n      setFileName(y)\n\n    } else {\n      setSelectedFiles([...selectedFiles, file])\n      setFileName([...fileItem, file.filename]);\n      // setUploads([\n      //   ...uploads,\n      //   {\n      //     title: file.filename,\n      //     uploaded: moment().format(\"DD-MM-YYYY\"),\n      //     status: true,\n      //     resName: res.data.data.fileName,\n      //   },\n      // ]);\n    }\n  }\n\n  const isSelected = (file) => {\n    // console.log(selectedFiles,file)\n    // selectedFiles.filter(function(el) { return el.filename == file.filename })\n    if (selectedFiles.some(item => item.filename === file.filename && item.uploadRefId == file.uploadRefId)) {\n      return true;\n    }\n    return false;\n  }\n\n  let convertExtensionToSmall = (name) => {\n\n    if (name) {\n\n      let format = name.split('.').pop().toLowerCase()\n      return format\n\n    }\n\n  }\n\n\n  console.log(uploads, selectedFiles);\n\n  return (\n    <>\n      <h3 className={Style.upload_reports_main_heading}>\n        Do you have any reports to upload?\n      </h3>\n      <YesNoButton\n        yes_btn_Change={yes_btn_Change}\n        No_btn_Change={No_btn_Change}\n        flag={reports.flag}\n      />\n      {reports.flag === \"Yes\" && (\n        <>\n          <Accordion\n            defaultActiveKey=\"1\"\n            className={`${Style.upload_reports_accordion_align}`}\n          >\n            <Accordion.Item eventKey=\"0\" className={`${uploads?.length == 0 && Style.noFiles}`}>\n              <Accordion.Body>\n                {uploads &&\n                  uploads.map((item, index) => {\n                    return (\n                      <div\n                        className={\n                          Style.upload_reports_location_content_selected\n                        }\n                      >\n                        <span className={Style.upload_reports_count}>\n                          {index + 1}\n                        </span>\n                        <img\n                          src={getFileTypeFromFileName(item.title)}\n                          className={Style.upload_reports_pdf_icon}\n                        ></img>\n                        <span className={Style.upload_reports_dropdown_content}>\n                          <span>{item.name}</span>\n                          <span className={Style.upload_reports_description}>\n                            {item.title} - {item.uploaded}\n                          </span>\n                        </span>\n                        <figure>\n                          <img\n                            src={Assets.tick_icon}\n                            className={Style.upload_reports_tick_icon}\n                          ></img>\n                        </figure>\n                        <figure>\n                          <img\n                            src={Assets.deleteIcon}\n                            className={Style.upload_reports_Delete_icon}\n                            onClick={() => deleteUploads(item)}\n                          />\n                        </figure>\n                      </div>\n                    );\n                  })}\n\n                  {\n                    console.log(selectedFiles,uploads)\n                  }\n\n                {selectedFiles &&\n                  selectedFiles.map((item, index) => {\n                    return (\n                      <div\n                        className={\n                          Style.upload_reports_location_content_selected\n                        }\n                      >\n                        <span className={Style.upload_reports_count}>\n                          {index+uploads.length + 1}\n                        </span>\n                        <img\n                          src={getFileTypeFromFileName(item.filename)}\n                          className={Style.upload_reports_pdf_icon}\n                        ></img>\n                        <span className={Style.upload_reports_dropdown_content}>\n                          <span>{item.title}</span>\n                          <span className={Style.upload_reports_description}>\n                            {item.filename} - {item.dateOfReport} \n                          </span>\n                        </span>\n                        <figure>\n                          <img\n                            src={Assets.tick_icon}\n                            className={Style.upload_reports_tick_icon}\n                          ></img>\n                        </figure>\n                        <figure>\n                          {/* <img\n                            src={Assets.deleteIcon}\n                            className={Style.upload_reports_Delete_icon}\n                            onClick={() => deleteUploads(item)}\n                          /> */}\n                        </figure>\n                      </div>\n                    );\n                  })}\n\n\n              </Accordion.Body>\n\n              <Accordion.Header>\n                <div className={Style.upload_button} onClick={() => { fileInputRef.current.click() }}>\n                  <input\n                    type=\"file\"\n                    id=\"upload\"\n                    accept=\".png, .jpg, .pdf\"\n                    ref={fileInputRef}\n                    onChange={(e) => {\n                      onFileChange(e.target.files[0]);\n                    }}\n                  />\n                  <FileDrop\n                    onFrameDragEnter={(event) =>\n                      console.log(\"onFrameDragEnter\", event)\n                    }\n                    onFrameDragLeave={(event) =>\n                      console.log(\"onFrameDragLeave\", event)\n                    }\n                    onFrameDrop={(event) => console.log(\"onFrameDrop\", event)}\n                    onDragOver={(event) => console.log(\"onDragOver\", event)}\n                    onDragLeave={(event) => console.log(\"onDragLeave\", event)}\n                    onDrop={(files, event) => {\n                      onFileChange(files[0]);\n                    }}\n                  >\n                    <label for=\"upload\">\n                      <img src={Assets.file_icon}></img>Open Files{\" \"}\n                    </label>\n                    <span className={Style.imageFormat}>\n                      (Supported formats - PDF, PNG, JPEG, JPG, DOC, DOCX, DCM,\n                      ZIP. File limits - 5 files of 5MB per file)\n                    </span>\n                  </FileDrop>\n                </div>\n                {/* <span className={Style.upload_reports_location_heading} onClick={fileUpload}>\n                  <img\n                    src={Assets.upload_icon}\n                    className={Style.upload_reports_upload_icon}\n                  ></img>\n                  <span className={Style.upload_reports_dropdown_heading}>\n                    Upload your reports here ({uploads.length} reports)\n                  </span>\n                </span> */}\n              </Accordion.Header>\n\n            </Accordion.Item>\n            <Accordion.Item eventKey=\"2\" className={`${uploadedData?.length == 0 && Style.noFiles}`}>\n              <Accordion.Header>\n                <span className={Style.upload_reports_location_heading}>\n                  <img\n                    src={Assets.upload_icon}\n                    className={Style.upload_reports_upload_icon}\n                  ></img>\n                  <span className={Style.upload_reports_dropdown_heading}>\n                    From My Uploads ({uploadedData?.length}\n                    <span className={Style.reportsText}>reports</span>)\n                  </span>\n                </span>\n              </Accordion.Header>\n              <Accordion.Body>\n                {uploadedData &&\n                  uploadedData.map((item, index) => {\n                    if (item.filename && item.filename != ',') {\n                      return (\n                        <div\n                          className={`${Style.upload_reports_location_content_selected} ${isSelected(item) && Style.active}`}\n                          onClick={() => { selectFiles(item, index) }}\n                        >\n                          <span className={Style.upload_reports_count}>\n                            {index + 1}\n                          </span>\n                          <img\n                            src={getFileTypeFromFileName(item.filename)}\n                            className={Style.upload_reports_pdf_icon}\n                          ></img>\n                          <span className={Style.upload_reports_dropdown_content}>\n                            <span style={{ textTransform: \"none\" }}>{item.filename.toLowerCase()}</span>\n                            <span className={Style.upload_reports_description} style={{ textTransform: \"none\" }}>\n                              {`Uploaded on - `}{item.dateOfReport}\n                            </span>\n                          </span>\n                          {isSelected(item) && <figure>\n                            <img\n                              src={Assets.tick_icon}\n                              className={Style.upload_reports_tick_icon}\n                            ></img>\n                          </figure>}\n                        </div>\n                      );\n                    }\n\n                  })}\n\n                {/* <div\n                  className={Style.upload_reports_location_content_unselected}\n                >\n                  <span className={Style.upload_reports_count}>2</span>\n                  <img\n                    src={Assets.pdf_icon}\n                    className={Style.upload_reports_pdf_icon}\n                  ></img>\n                  <span className={Style.upload_reports_dropdown_content}>\n                    <span>Medical report</span>\n                    <span className={Style.upload_reports_description}>\n                      Uploaded - 18-8-2021\n                    </span>\n                  </span>\n                </div> */}\n              </Accordion.Body>\n            </Accordion.Item>\n          </Accordion>\n          {/* <Button className={Style.upload_reports_open_files}>\n                    <img src={Assets.file_icon}></img>\n                    Open Files\n            </Button> */}\n          {/* <div className={Style.upload_button}>\n            <input type=\"file\" id=\"upload\" ref={fileInputRef} onChange={(e)=>{onFileChange(e.target.files[0])}} />\n            <FileDrop\n          onFrameDragEnter={(event) => console.log('onFrameDragEnter', event)}\n          onFrameDragLeave={(event) => console.log('onFrameDragLeave', event)}\n          onFrameDrop={(event) => console.log('onFrameDrop', event)}\n          onDragOver={(event) => console.log('onDragOver', event)}\n          onDragLeave={(event) => console.log('onDragLeave', event)}\n          onDrop={(files, event) => {console.log('onDrop!', files, event); onFileChange(files[0])}}\n        >\n            <label for=\"upload\">\n              <img src={Assets.file_icon}></img>Open Files\n            </label>\n            </FileDrop>\n          </div> */}\n          {error && (\n            <div>\n              {\" \"}\n              <p className={Style.ShowErrormsg}>\n                Please select image size less than 5 MB\n              </p>\n            </div>\n          )}\n\n          {showError && (\n            <div>\n              {\" \"}\n              <p className={Style.ShowErrormsg}>Please upload report</p>\n            </div>\n          )}\n          <div className={`${Style.btn_floating} btn_floating`}>\n            <Button\n              className={Style.upload_reports_continue_button}\n              onClick={progressIncrementer}\n              onClick={Continue}\n            >\n              Continue\n            </Button>\n          </div>\n        </>\n      )}\n      <ConfirmModal\n        showModal={showModal}\n        setShowModal={setShowModal}\n        onCancel={onCancel}\n        deleteItems={deleteItems}\n      />\n    </>\n  );\n}\n\nexport default UploadReports;\n"]},"metadata":{},"sourceType":"module"}