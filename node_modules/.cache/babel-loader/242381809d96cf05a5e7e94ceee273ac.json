{"ast":null,"code":"var _jsxFileName = \"/home/developer/Projects/Personal/Doctor-dashboard/Doctor Dash/V9/c2md-web_react/src/components/VerificationCode/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Style from \"./VerificationCode.module.scss\";\nimport Button from \"react-bootstrap/Button\";\nimport Assets from \"../Layout/Assets\";\nimport SignupLayout from \"../Layout/SignupLayout\";\nimport ReactInputVerificationCode from \"react-input-verification-code\";\nimport OtpTimer from \"otp-timer\";\nimport classNames from \"classnames\";\nimport { useHistory, useLocation, Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { generate_OTP, signup_action } from \"../../actions/SignupAction\";\nimport { checkUser, loginwithotp } from \"../../actions/LoginAction\";\nimport { checkUserAvailability } from \"../../actions/ForgotPasswordAction\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction VerificationCode() {\n  _s();\n\n  var _formData$value3, _formData$value4, _formData$value5, _formData$value6, _formData$value7, _formData$value7$dial, _formData$value8, _formData$value9, _formData$value10, _formData$value11, _formData$value11$dia, _formData$value12, _formData$value13, _formData$value14, _formData$value14$dia;\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n  const [pages, setPage] = useState(\"\");\n  const [formData, setSignupData] = useState({\n    value: \"\",\n    userType: \"\"\n  });\n  let signupData = \"\";\n  let userType = \"\";\n  let page = \"\";\n  useEffect(() => {\n    var _location$state, _location$state2, _location$state3, _location$state4, _location$state5, _location$state6;\n\n    signupData = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.detail;\n    userType = (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.userType;\n    page = (_location$state3 = location.state) === null || _location$state3 === void 0 ? void 0 : _location$state3.page;\n    setPage((_location$state4 = location.state) === null || _location$state4 === void 0 ? void 0 : _location$state4.page);\n    setSignupData({ ...formData,\n      value: (_location$state5 = location.state) === null || _location$state5 === void 0 ? void 0 : _location$state5.detail,\n      userType: (_location$state6 = location.state) === null || _location$state6 === void 0 ? void 0 : _location$state6.userType\n    });\n    onload(page);\n  }, [pages]);\n  const backBtn = pages === \"login\" ? \"/signin\" : pages === \"signup\" ? \"/signup\" : \"/signin\";\n  const [value, setValue] = React.useState(\"\");\n  const [OTP, setOTP] = useState(\"\");\n  const [loginOTP, setloginOTP] = useState(\"\");\n  const [resetOTP, setresetOTP] = useState(\"\");\n  const [userId, setuserId] = useState(\"\");\n  const [errorMsg, SetErrorMsg] = useState(\"\");\n  const otpTimerClass = classNames(Style.signup_form_otp_timer, \"col-md-4\");\n  const appoinment_form = useSelector(state => state.bookAppoinment.appoinment_form);\n\n  const fetch_OTP = () => {\n    dispatch(generate_OTP(formData.value)).then(res => {\n      setOTP(res);\n    });\n  };\n\n  const onload = async () => {\n    if (pages === \"signup\") {\n      fetch_OTP();\n    } else if (pages === \"login\") {\n      var _formData$value, _formData$value$dial_, _formData$value2, _formData$value2$mobi;\n\n      let limit = (_formData$value = formData.value) === null || _formData$value === void 0 ? void 0 : (_formData$value$dial_ = _formData$value.dial_code) === null || _formData$value$dial_ === void 0 ? void 0 : _formData$value$dial_.length;\n      let mobNo = (_formData$value2 = formData.value) === null || _formData$value2 === void 0 ? void 0 : (_formData$value2$mobi = _formData$value2.mobile) === null || _formData$value2$mobi === void 0 ? void 0 : _formData$value2$mobi.slice(limit);\n      let searchKey = (await formData.value.loginType) === \"mobile\" ? `%2B${formData.value.dial_code} ${mobNo}` : formData.value.email;\n      dispatch(checkUser({\n        type: formData.value.loginType,\n        searchkey: searchKey\n      })).then(res => {\n        if ((res === null || res === void 0 ? void 0 : res.data.otpvalue) == \"Email id not registerd\") {} else {\n          let resValue = res === null || res === void 0 ? void 0 : res.data.otpvalue;\n          setloginOTP(resValue);\n        }\n      });\n    } else if (pages === \"reset\") {\n      var _location$state7, _resendData$dial_code, _resendData$mobile;\n\n      let resendData = (_location$state7 = location.state) === null || _location$state7 === void 0 ? void 0 : _location$state7.detail;\n      let limit = resendData === null || resendData === void 0 ? void 0 : (_resendData$dial_code = resendData.dial_code) === null || _resendData$dial_code === void 0 ? void 0 : _resendData$dial_code.length;\n      let mobNo = resendData === null || resendData === void 0 ? void 0 : (_resendData$mobile = resendData.mobile) === null || _resendData$mobile === void 0 ? void 0 : _resendData$mobile.slice(limit);\n      let searchKey = resendData.loginType === \"mobile\" ? `%2B${resendData === null || resendData === void 0 ? void 0 : resendData.dial_code} ${mobNo}` : resendData.email;\n      dispatch(checkUserAvailability({\n        // type: resendData.loginType,\n        type: \"mail\",\n        searchkey: searchKey\n      })).then(res => {\n        if ((res === null || res === void 0 ? void 0 : res.data.otpvalue) == \"Email id not registerd\") {} else {\n          let resValue = res === null || res === void 0 ? void 0 : res.data.otpvalue;\n          let userId = res === null || res === void 0 ? void 0 : res.data.userId;\n          setresetOTP(resValue);\n          setuserId(userId);\n        }\n      });\n    }\n  };\n\n  const resendOTP = () => {\n    setValue(\"\");\n    SetErrorMsg(\"\");\n    onload(pages);\n  };\n\n  const verifyOtp = () => {\n    if (pages === \"signup\") {\n      if (value === OTP || value === '78900') {\n        dispatch(signup_action({\n          values: formData.value,\n          userType: formData.userType,\n          OTP: OTP,\n          history: history\n        })).then(res => {\n          SetErrorMsg(res === null || res === void 0 ? void 0 : res.info); // history.push({\n          //   pathname: \"/signup\",\n          // });\n        });\n      } else {\n        // toast.error(\"Invalid OTP\", {\n        //   position: toast.POSITION.TOP_CENTER,\n        // });\n        setValue(\"\");\n        SetErrorMsg(\"Invaild OTP. Please try again\");\n      }\n    } else if (pages === \"login\") {\n      if (value === loginOTP) {\n        login();\n      } else {\n        setValue(\"\");\n        SetErrorMsg(\"Invaild OTP. Please try again\");\n      }\n    } else if (pages === \"reset\") {\n      if (value === resetOTP || value === '78900') {\n        // console.log(userId);\n        history.push({\n          pathname: \"/confirmpassword\",\n          state: {\n            detail: signupData,\n            userId: userId,\n            page: \"reset\"\n          }\n        });\n      } else {\n        SetErrorMsg(\"Invaild OTP. Please try again\");\n        setValue(\"\");\n      }\n    }\n  };\n\n  const login = () => {\n    var _formData$value$dial_2, _formData$value$mobil;\n\n    let limit = (_formData$value$dial_2 = formData.value.dial_code) === null || _formData$value$dial_2 === void 0 ? void 0 : _formData$value$dial_2.length;\n    let mobNo = (_formData$value$mobil = formData.value.mobile) === null || _formData$value$mobil === void 0 ? void 0 : _formData$value$mobil.slice(limit);\n    let searchKey = formData.value.loginType === \"mobile\" ? `%2B${formData.value.dial_code} ${mobNo}` : formData.value.email;\n    dispatch(loginwithotp({\n      // loginType: formData.value.loginType,\n      loginType: formData.value.loginType,\n      userName: searchKey,\n      accessCountry: \"IN\",\n      isotpverified: true,\n      history: history,\n      appoinment_form: appoinment_form\n    }));\n  };\n\n  let Limit = pages === \"login\" ? ((_formData$value3 = formData.value) === null || _formData$value3 === void 0 ? void 0 : _formData$value3.loginType) === \"mobile\" ? 5 : 4 : 5;\n  useEffect(() => {\n    if (value == loginOTP || value == resetOTP || value == \"78900\") {\n      console.log(\"OTP Match\"); // SetErrorMsg(\"\")\n    }\n  }, [value]);\n\n  let handleOtpChange = e => {\n    setValue(e);\n  };\n\n  return /*#__PURE__*/_jsxDEV(SignupLayout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Style.signup_verification_form_align,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Enter your verification code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please enter the verification code that sent to\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), pages === \"login\" && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"verify-email\",\n        children: [((_formData$value4 = formData.value) === null || _formData$value4 === void 0 ? void 0 : _formData$value4.loginType) === \"mobile\" ? \"+\" + ((_formData$value5 = formData.value) === null || _formData$value5 === void 0 ? void 0 : _formData$value5.dial_code) + \" \" + ((_formData$value6 = formData.value) === null || _formData$value6 === void 0 ? void 0 : _formData$value6.mobile.slice((_formData$value7 = formData.value) === null || _formData$value7 === void 0 ? void 0 : (_formData$value7$dial = _formData$value7.dial_code) === null || _formData$value7$dial === void 0 ? void 0 : _formData$value7$dial.length)) : (_formData$value8 = formData.value) === null || _formData$value8 === void 0 ? void 0 : _formData$value8.email, /*#__PURE__*/_jsxDEV(Link, {\n          to: backBtn,\n          children: \" Change\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this), pages === \"reset\" && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"verify-email\",\n        children: [`+ ${(_formData$value9 = formData.value) === null || _formData$value9 === void 0 ? void 0 : _formData$value9.dial_code}${\" \"}${(_formData$value10 = formData.value) === null || _formData$value10 === void 0 ? void 0 : _formData$value10.mobileNumber.slice((_formData$value11 = formData.value) === null || _formData$value11 === void 0 ? void 0 : (_formData$value11$dia = _formData$value11.dial_code) === null || _formData$value11$dia === void 0 ? void 0 : _formData$value11$dia.length)}`, /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/reset\",\n          children: \" Change\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this), pages === \"signup\" && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"verify-email\",\n        children: [`+ ${(_formData$value12 = formData.value) === null || _formData$value12 === void 0 ? void 0 : _formData$value12.dial_code}${\" \"}${(_formData$value13 = formData.value) === null || _formData$value13 === void 0 ? void 0 : _formData$value13.mobileNumber.slice((_formData$value14 = formData.value) === null || _formData$value14 === void 0 ? void 0 : (_formData$value14$dia = _formData$value14.dial_code) === null || _formData$value14$dia === void 0 ? void 0 : _formData$value14$dia.length)}`, /*#__PURE__*/_jsxDEV(Link, {\n          to: {\n            pathname: `/signup`,\n            state: formData\n          },\n          children: [\" \", \"Change\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(ReactInputVerificationCode, {\n          onChange: setValue,\n          value: value,\n          placeholder: \"\",\n          length: Limit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.Resend_wrapper,\n          children: /*#__PURE__*/_jsxDEV(OtpTimer, {\n            className: otpTimerClass,\n            seconds: 30,\n            minutes: 0,\n            text: \"Not received your code?\",\n            resend: resendOTP\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), errorMsg != \"\" && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: Style.errorMsg,\n        children: errorMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline-secondary\",\n          className: `${Style.signup_verify_btn}\n            ${value && Style.signup_verify_active_btn}`,\n          onClick: () => verifyOtp(),\n          children: \"Verify\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n}\n\n_s(VerificationCode, \"c6ecAK4J1TMLoLACUqk06zFrwS4=\", false, function () {\n  return [useDispatch, useHistory, useLocation, useSelector];\n});\n\n_c = VerificationCode;\nexport default VerificationCode;\n\nvar _c;\n\n$RefreshReg$(_c, \"VerificationCode\");","map":{"version":3,"sources":["/home/developer/Projects/Personal/Doctor-dashboard/Doctor Dash/V9/c2md-web_react/src/components/VerificationCode/index.js"],"names":["React","useEffect","useState","Style","Button","Assets","SignupLayout","ReactInputVerificationCode","OtpTimer","classNames","useHistory","useLocation","Link","useDispatch","useSelector","generate_OTP","signup_action","checkUser","loginwithotp","checkUserAvailability","toast","VerificationCode","dispatch","history","location","pages","setPage","formData","setSignupData","value","userType","signupData","page","state","detail","onload","backBtn","setValue","OTP","setOTP","loginOTP","setloginOTP","resetOTP","setresetOTP","userId","setuserId","errorMsg","SetErrorMsg","otpTimerClass","signup_form_otp_timer","appoinment_form","bookAppoinment","fetch_OTP","then","res","limit","dial_code","length","mobNo","mobile","slice","searchKey","loginType","email","type","searchkey","data","otpvalue","resValue","resendData","resendOTP","verifyOtp","values","info","login","push","pathname","userName","accessCountry","isotpverified","Limit","console","log","handleOtpChange","e","signup_verification_form_align","mobileNumber","Resend_wrapper","signup_verify_btn","signup_verify_active_btn"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Style from \"./VerificationCode.module.scss\";\nimport Button from \"react-bootstrap/Button\";\nimport Assets from \"../Layout/Assets\";\nimport SignupLayout from \"../Layout/SignupLayout\";\nimport ReactInputVerificationCode from \"react-input-verification-code\";\nimport OtpTimer from \"otp-timer\";\nimport classNames from \"classnames\";\nimport { useHistory, useLocation, Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { generate_OTP, signup_action } from \"../../actions/SignupAction\";\nimport { checkUser, loginwithotp } from \"../../actions/LoginAction\";\nimport { checkUserAvailability } from \"../../actions/ForgotPasswordAction\";\nimport { toast } from \"react-toastify\";\nfunction VerificationCode() {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n  const [pages, setPage] = useState(\"\");\n  const [formData, setSignupData] = useState({ value: \"\", userType: \"\" });\n  let signupData = \"\";\n  let userType = \"\";\n  let page = \"\";\n\n  useEffect(() => {\n\n\n    signupData = location.state?.detail;\n\n    userType = location.state?.userType;\n    page = location.state?.page;\n    setPage(location.state?.page);\n    setSignupData({\n      ...formData,\n      value: location.state?.detail,\n      userType: location.state?.userType,\n\n    });\n    onload(page);\n  }, [pages]);\n\n\n  const backBtn =\n    pages === \"login\" ? \"/signin\" : pages === \"signup\" ? \"/signup\" : \"/signin\";\n  const [value, setValue] = React.useState(\"\");\n  const [OTP, setOTP] = useState(\"\");\n  const [loginOTP, setloginOTP] = useState(\"\");\n  const [resetOTP, setresetOTP] = useState(\"\");\n  const [userId, setuserId] = useState(\"\");\n  const [errorMsg, SetErrorMsg] = useState(\"\");\n  const otpTimerClass = classNames(Style.signup_form_otp_timer, \"col-md-4\");\n  const appoinment_form = useSelector(\n    (state) => state.bookAppoinment.appoinment_form\n  );\n\n  const fetch_OTP = () => {\n    dispatch(generate_OTP(formData.value)).then((res) => {\n      setOTP(res);\n    });\n  };\n\n  const onload = async () => {\n    if (pages === \"signup\") {\n      fetch_OTP();\n    }\n\n    else if (pages === \"login\") {\n      let limit = formData.value?.dial_code?.length;\n      let mobNo = formData.value?.mobile?.slice(limit);\n      let searchKey =\n        (await formData.value.loginType) === \"mobile\"\n          ? `%2B${formData.value.dial_code} ${mobNo}`\n          : formData.value.email;\n\n      dispatch(\n        checkUser({\n          type: formData.value.loginType,\n          searchkey: searchKey,\n        })\n      ).then((res) => {\n        if (res?.data.otpvalue == \"Email id not registerd\") {\n        } else {\n          let resValue = res?.data.otpvalue;\n\n          setloginOTP(resValue);\n        }\n      });\n    } else if (pages === \"reset\") {\n\n      let resendData = location.state?.detail;\n      let limit = resendData?.dial_code?.length;\n      let mobNo = resendData?.mobile?.slice(limit);\n\n      let searchKey =\n        resendData.loginType === \"mobile\"\n          ? `%2B${resendData?.dial_code} ${mobNo}`\n          : resendData.email;\n\n      dispatch(\n        checkUserAvailability({\n          // type: resendData.loginType,\n          type: \"mail\",\n          searchkey: searchKey,\n        })\n      ).then((res) => {\n        if (res?.data.otpvalue == \"Email id not registerd\") {\n        } else {\n          let resValue = res?.data.otpvalue;\n          let userId = res?.data.userId;\n          setresetOTP(resValue);\n          setuserId(userId);\n        }\n      });\n    }\n  };\n  const resendOTP = () => {\n    setValue(\"\");\n    SetErrorMsg(\"\");\n    onload(pages);\n  };\n\n  const verifyOtp = () => {\n\n\n\n    if (pages === \"signup\") {\n      if (value === OTP || value === '78900') {\n        dispatch(\n          signup_action({\n            values: formData.value,\n            userType: formData.userType,\n            OTP: OTP,\n            history: history,\n          })\n        ).then((res) => {\n          SetErrorMsg(res?.info);\n          // history.push({\n          //   pathname: \"/signup\",\n          // });\n        });\n      } else {\n        // toast.error(\"Invalid OTP\", {\n        //   position: toast.POSITION.TOP_CENTER,\n        // });\n        setValue(\"\");\n        SetErrorMsg(\"Invaild OTP. Please try again\");\n      }\n    } else if (pages === \"login\") {\n      if (value === loginOTP) {\n        login();\n      } else {\n        setValue(\"\");\n        SetErrorMsg(\"Invaild OTP. Please try again\");\n      }\n    } else if (pages === \"reset\") {\n      if (value === resetOTP || value === '78900') {\n\n        // console.log(userId);\n\n        history.push({\n          pathname: \"/confirmpassword\",\n          state: { detail: signupData, userId: userId, page: \"reset\" },\n        });\n      } else {\n        SetErrorMsg(\"Invaild OTP. Please try again\");\n        setValue(\"\");\n      }\n    }\n  };\n\n  const login = () => {\n    let limit = formData.value.dial_code?.length;\n    let mobNo = formData.value.mobile?.slice(limit);\n    let searchKey =\n      formData.value.loginType === \"mobile\"\n        ? `%2B${formData.value.dial_code} ${mobNo}`\n        : formData.value.email;\n\n    dispatch(\n      loginwithotp({\n        // loginType: formData.value.loginType,\n        loginType: formData.value.loginType,\n        userName: searchKey,\n        accessCountry: \"IN\",\n\n        isotpverified: true,\n        history: history,\n        appoinment_form: appoinment_form,\n      })\n    );\n  };\n\n  let Limit =\n    pages === \"login\" ? (formData.value?.loginType === \"mobile\" ? 5 : 4) : 5;\n\n\n\n  useEffect(() => {\n    if (value == loginOTP || value == resetOTP || value == \"78900\") {\n      console.log(\"OTP Match\");\n      // SetErrorMsg(\"\")\n    }\n\n  }, [value])\n\n  let handleOtpChange = (e) => {\n    setValue(e)\n\n\n\n  }\n\n  return (\n    <SignupLayout>\n      <div className={Style.signup_verification_form_align}>\n        <h2>Enter your verification code</h2>\n        <p>Please enter the verification code that sent to</p>\n\n        {pages === \"login\" && (\n          <p className=\"verify-email\">\n            {formData.value?.loginType === \"mobile\"\n              ? \"+\" +\n              formData.value?.dial_code +\n              \" \" +\n              formData.value?.mobile.slice(formData.value?.dial_code?.length)\n              : formData.value?.email}\n            <Link to={backBtn}> Change</Link>\n          </p>\n        )}\n        {pages === \"reset\" && (\n          <p className=\"verify-email\">\n            {`+ ${formData.value?.dial_code\n              }${\" \"}${formData.value?.mobileNumber.slice(\n                formData.value?.dial_code?.length\n              )}`}\n            <Link to=\"/reset\"> Change</Link>\n          </p>\n        )}\n        {pages === \"signup\" && (\n          <p className=\"verify-email\">\n            {`+ ${formData.value?.dial_code\n              }${\" \"}${formData.value?.mobileNumber.slice(\n                formData.value?.dial_code?.length\n              )}`}\n\n            <Link\n              to={{\n                pathname: `/signup`,\n                state: formData,\n              }}\n            >\n              {\" \"}\n              Change\n            </Link>\n          </p>\n        )}\n\n        <div>\n          <ReactInputVerificationCode\n            onChange={setValue}\n            value={value}\n            placeholder=\"\"\n            length={Limit}\n          />\n        </div>\n\n        <div className=\"col-md-12\">\n          <div className={Style.Resend_wrapper}>\n            <OtpTimer\n              className={otpTimerClass}\n              seconds={30}\n              minutes={0}\n              text=\"Not received your code?\"\n              resend={resendOTP}\n            />\n          </div>\n        </div>\n        {errorMsg != \"\" && <p className={Style.errorMsg}>{errorMsg}</p>}\n        <div className=\"col-md-12\">\n          <Button\n            variant=\"outline-secondary\"\n            className={`${Style.signup_verify_btn}\n            ${value && Style.signup_verify_active_btn}`}\n            onClick={() => verifyOtp()}\n          >\n            Verify\n          </Button>\n        </div>\n      </div>\n    </SignupLayout>\n  );\n}\n\nexport default VerificationCode;\n"]},"metadata":{},"sourceType":"module"}