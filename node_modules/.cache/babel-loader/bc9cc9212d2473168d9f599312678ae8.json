{"ast":null,"code":"var _jsxFileName = \"/home/developer/Projects/Personal/Doctor-dashboard/Doctor Dash/V9/c2md-web_react/src/components/AppointmentPerson/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Style from \"./AppointmentPerson.module.scss\";\nimport Assets from \"../Layout/Assets\";\nimport { Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport AddMember from \"../AddMember\";\nimport AgeGender from \"../AgeGender\";\nimport { editMember } from \"../../actions/BookAppoinmentAction\";\nimport moment from \"moment\";\nimport { fetch_family_members, fetch_patient_medicalDetails } from \"../../actions/FamilyMembersAction\";\nimport { updateLoginDetails } from '../../actions/LoginAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AppointmentPerson({\n  progressIncrementer,\n  setAddMemeber,\n  setInnerPage,\n  innerPage,\n  appoinment_form,\n  Store_formData\n}) {\n  _s();\n\n  const userData = useSelector(state => state.login);\n  const dispatch = useDispatch();\n  const memberList = useSelector(state => {\n    var _state$bookAppoinment;\n\n    return (_state$bookAppoinment = state.bookAppoinment) === null || _state$bookAppoinment === void 0 ? void 0 : _state$bookAppoinment.familyMember;\n  });\n  const selectedMemberRedux = useSelector(state => {\n    var _state$bookAppoinment2, _state$bookAppoinment3;\n\n    return (_state$bookAppoinment2 = state.bookAppoinment) === null || _state$bookAppoinment2 === void 0 ? void 0 : (_state$bookAppoinment3 = _state$bookAppoinment2.appoinment_form) === null || _state$bookAppoinment3 === void 0 ? void 0 : _state$bookAppoinment3.selectedMember;\n  });\n  const loginData = useSelector(state => state.login);\n  useEffect(() => {\n    if (selectedMemberRedux) {\n      setMember(selectedMemberRedux);\n    }\n\n    console.log(selectedMemberRedux);\n  }, [selectedMemberRedux]);\n  useEffect(() => {\n    document.querySelector(\"body\").scrollTo(0, 0);\n\n    if (memberList.length <= 1) {\n      dispatch(fetch_family_members({\n        userid: userData\n      }));\n    }\n  }, []);\n  const [editDob, setEditDob] = useState(false);\n  let prevMember = memberList[0];\n  const [member, setMember] = useState();\n  useEffect(() => {\n    setMember(prevMember);\n  }, [prevMember]);\n  const errorInit = {\n    gender: false,\n    dob: false,\n    error: false\n  };\n  const [error, setError] = useState(errorInit);\n\n  const selectProfile = member => {\n    setMember(member);\n    setEditDob(true);\n    setInnerPage(1);\n    console.log(\"Setting on redux***************\");\n    dispatch(Store_formData({ ...appoinment_form,\n      selectedMember: member\n    })); // if (member.dob == \"\") {\n    //   setEditDob(true);\n    //   setInnerPage(1);\n    // }\n  };\n\n  useEffect(() => {\n    if (editDob && error.error) {\n      let temp = errorInit;\n\n      if (member.gender == \"\") {\n        temp = { ...temp,\n          gender: true,\n          error: true\n        };\n      }\n\n      if (member.dob == \"\") {\n        temp = { ...temp,\n          dob: true,\n          error: true\n        };\n      }\n\n      setError(temp);\n    }\n  }, [member]);\n\n  const editSubmited = () => {\n    let temp = errorInit;\n\n    if (member.gender == \"\") {\n      temp = { ...temp,\n        gender: true,\n        error: true\n      };\n    }\n\n    if (member.dob == \"\") {\n      temp = { ...temp,\n        dob: true,\n        error: true\n      };\n    }\n\n    setError(temp);\n\n    if (temp.error == false) {\n      dispatch(editMember(member));\n      setEditDob(false);\n      setInnerPage(0);\n    }\n  };\n\n  const Continue = selected => {\n    if (selected.dob == undefined || selected.dob == \"\") {\n      setEditDob(true);\n      setInnerPage(1);\n    } else {\n      var _userData$user, _userData$user2;\n\n      dispatch(updateLoginDetails({ ...loginData,\n        user: { ...loginData.user,\n          dob: selected.dob\n        }\n      }));\n      dispatch(Store_formData({ ...appoinment_form,\n        firstName: selected.relationship == \"self\" ? userData === null || userData === void 0 ? void 0 : (_userData$user = userData.user) === null || _userData$user === void 0 ? void 0 : _userData$user.profileName : selected.memberName,\n        relationship: (selected === null || selected === void 0 ? void 0 : selected.id) ? selected === null || selected === void 0 ? void 0 : selected.id : `rel-${selected.relationship}`,\n        gender: selected.gender,\n        dob: selected.dob,\n        appointmentFor: selected.relationship == \"self\" ? \"Self\" : \"Loved One\",\n        selectedMember: selected\n      }));\n      let userID = member.relationship == \"self\" ? userData === null || userData === void 0 ? void 0 : (_userData$user2 = userData.user) === null || _userData$user2 === void 0 ? void 0 : _userData$user2.userId : member === null || member === void 0 ? void 0 : member.id;\n      dispatch(fetch_patient_medicalDetails({\n        userdata: userData === null || userData === void 0 ? void 0 : userData.user,\n        date: appoinment_form,\n        userID: userID\n      }));\n      progressIncrementer();\n    }\n  };\n\n  let getAgeInMonths = dob => {\n    let months = moment().diff(moment(dob, 'DD/MMM/YYYY'), \"months\");\n    let days = moment().diff(moment(dob, 'DD/MMM/YYYY'), \"days\");\n    let result = `${months} months)`;\n\n    if (months <= 0) {\n      result = `${days} days)`;\n    } else {\n      result = `${months} months ${moment(new Date()).date()} days)`;\n    }\n\n    return result;\n  };\n\n  let getAgeInYears = dob => {\n    var _moment$diff;\n\n    let result = (_moment$diff = moment().diff(moment(dob, 'DD/MMM/YYYY'), \"years\")) === null || _moment$diff === void 0 ? void 0 : _moment$diff.toString();\n    return `${result} yrs)`;\n  };\n\n  let handleSelectMember = (e, member) => {\n    e.stopPropagation();\n    console.log(\"Setting redux********************\", member);\n    setMember(member);\n    Continue(member);\n  };\n\n  return innerPage == 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: Style.book_appointment_main_heading,\n      children: [\"Who is this appointment for? \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mandatory\",\n        children: \"*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 38\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Style.memberList,\n      children: [memberList && memberList.length > 0 && memberList.map((memer, index) =>\n      /*#__PURE__*/\n      // member?.memberName == memer.memberName?console.log(\"Match\"):null\n      _jsxDEV(\"div\", {\n        className: `${Style.book_appointment_person_input} ${(member === null || member === void 0 ? void 0 : member.memberName) == memer.memberName && (member === null || member === void 0 ? void 0 : member.id) == memer.id && Style.active}`,\n        onClick: () => {\n          Continue(memer);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.book_appointment_person_img,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Assets.person_icon,\n            className: Style.book_appointment_person_icon_image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: Assets.icon_person_blue,\n            className: Style.book_appointment_person_active_icon_image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: Style.book_appointment_person_input_box,\n          onClick: e => {\n            handleSelectMember(e, memer);\n          },\n          children: [memer.memberName, \" \", memer.dob && memer.dob != \"\" && `(${memer.gender}, ${moment().diff(moment(memer.dob, 'DD/MMM/YYYY'), \"years\") <= 0 ? getAgeInMonths(memer.dob) : getAgeInYears(memer.dob)}\n                  `]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Assets.pencil_icon,\n          className: Style.book_appointment_pencil_icon_image,\n          onClick: e => {\n            e.stopPropagation();\n            selectProfile(memer);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Assets.blue_edit_icon,\n          className: Style.book_appointment_pencil_active_image,\n          onClick: e => {\n            e.stopPropagation();\n            selectProfile(memer);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.book_appointment_person_input,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.book_appointment_person_img,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Assets.plus_icon,\n            className: Style.book_appointment_person_icon_image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: Assets.icon_plus_blue,\n            className: Style.book_appointment_person_active_icon_image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: Style.book_appointment_person_input_box,\n          onClick: () => {\n            setAddMemeber(true);\n            setInnerPage(innerPage + 1);\n            setEditDob(false);\n          },\n          children: \"For someone else\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Assets.right_arrow_icon,\n          className: Style.book_appointment_pencil_icon_image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Assets.icon_arrow_blue,\n          className: Style.book_appointment_pencil_active_image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true) : !editDob ? /*#__PURE__*/_jsxDEV(AddMember, {\n    setMemberMain: setMember,\n    setInnerPage: setInnerPage,\n    innerPage: innerPage\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 308,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: Style.book_appointment_main_heading,\n      children: \"Age & Gender\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AgeGender, {\n      member: member,\n      setMember: setMember,\n      error: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${Style.btn_floating} btn_floating`,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        className: Style.book_appointment_continue_button,\n        onClick: editSubmited,\n        children: \"Continue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(AppointmentPerson, \"m2BJoUiRmrwDpP2Tn9dPo6HCaRE=\", false, function () {\n  return [useSelector, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = AppointmentPerson;\nexport default AppointmentPerson;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppointmentPerson\");","map":{"version":3,"sources":["/home/developer/Projects/Personal/Doctor-dashboard/Doctor Dash/V9/c2md-web_react/src/components/AppointmentPerson/index.js"],"names":["React","useState","useEffect","Style","Assets","Button","useDispatch","useSelector","AddMember","AgeGender","editMember","moment","fetch_family_members","fetch_patient_medicalDetails","updateLoginDetails","AppointmentPerson","progressIncrementer","setAddMemeber","setInnerPage","innerPage","appoinment_form","Store_formData","userData","state","login","dispatch","memberList","bookAppoinment","familyMember","selectedMemberRedux","selectedMember","loginData","setMember","console","log","document","querySelector","scrollTo","length","userid","editDob","setEditDob","prevMember","member","errorInit","gender","dob","error","setError","selectProfile","temp","editSubmited","Continue","selected","undefined","user","firstName","relationship","profileName","memberName","id","appointmentFor","userID","userId","userdata","date","getAgeInMonths","months","diff","days","result","Date","getAgeInYears","toString","handleSelectMember","e","stopPropagation","book_appointment_main_heading","map","memer","index","book_appointment_person_input","active","book_appointment_person_img","person_icon","book_appointment_person_icon_image","icon_person_blue","book_appointment_person_active_icon_image","book_appointment_person_input_box","pencil_icon","book_appointment_pencil_icon_image","blue_edit_icon","book_appointment_pencil_active_image","plus_icon","icon_plus_blue","right_arrow_icon","icon_arrow_blue","btn_floating","book_appointment_continue_button"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Style from \"./AppointmentPerson.module.scss\";\nimport Assets from \"../Layout/Assets\";\nimport { Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport AddMember from \"../AddMember\";\nimport AgeGender from \"../AgeGender\";\nimport { editMember } from \"../../actions/BookAppoinmentAction\";\nimport moment from \"moment\";\nimport {\n  fetch_family_members,\n  fetch_patient_medicalDetails,\n} from \"../../actions/FamilyMembersAction\";\nimport { updateLoginDetails } from '../../actions/LoginAction';\n\nfunction AppointmentPerson({\n  progressIncrementer,\n  setAddMemeber,\n  setInnerPage,\n  innerPage,\n  appoinment_form,\n  Store_formData,\n}) {\n  const userData = useSelector((state) => state.login);\n\n  const dispatch = useDispatch();\n  const memberList = useSelector((state) => state.bookAppoinment?.familyMember);\n  const selectedMemberRedux = useSelector((state) => state.bookAppoinment?.appoinment_form?.selectedMember);\n  const loginData = useSelector((state) => state.login);\n\n  useEffect(() => {\n\n    if(selectedMemberRedux)\n    {\n      setMember(selectedMemberRedux)\n    }\n\n    console.log(selectedMemberRedux);\n   \n  }, [selectedMemberRedux])\n  \n \n\n  useEffect(() => {\n    document.querySelector(\"body\").scrollTo(0, 0);\n    if (memberList.length <= 1) {\n      dispatch(fetch_family_members({ userid: userData }));\n\n    }\n  }, []);\n\n  const [editDob, setEditDob] = useState(false);\n  let prevMember = memberList[0];\n  const [member, setMember] = useState();\n\n  useEffect(() => {\n    setMember(prevMember);\n  }, [prevMember]);\n\n  const errorInit = {\n    gender: false,\n    dob: false,\n    error: false,\n  };\n  const [error, setError] = useState(errorInit);\n\n  const selectProfile = (member) => {\n    setMember(member);\n\n    setEditDob(true);\n    setInnerPage(1);\n\n    console.log(\"Setting on redux***************\");\n\n    dispatch(\n      Store_formData({\n        ...appoinment_form,\n        selectedMember: member,\n      })\n    );\n\n    // if (member.dob == \"\") {\n    //   setEditDob(true);\n    //   setInnerPage(1);\n    // }\n  };\n\n  useEffect(() => {\n    if (editDob && error.error) {\n      let temp = errorInit;\n      if (member.gender == \"\") {\n        temp = { ...temp, gender: true, error: true };\n      }\n      if (member.dob == \"\") {\n        temp = { ...temp, dob: true, error: true };\n      }\n      setError(temp);\n    }\n  }, [member]);\n\n  const editSubmited = () => {\n    let temp = errorInit;\n    if (member.gender == \"\") {\n      temp = { ...temp, gender: true, error: true };\n    }\n    if (member.dob == \"\") {\n      temp = { ...temp, dob: true, error: true };\n    }\n    setError(temp);\n    if (temp.error == false) {\n\n      dispatch(editMember(member));\n      setEditDob(false);\n      setInnerPage(0);\n    }\n  };\n\n  const Continue = (selected) => {\n    if (selected.dob == undefined || selected.dob == \"\") {\n      setEditDob(true);\n      setInnerPage(1);\n    } else {\n      dispatch(updateLoginDetails({ ...loginData, user: { ...loginData.user, dob: selected.dob } }))\n      dispatch(\n        Store_formData({\n          ...appoinment_form,\n          firstName:\n          selected.relationship == \"self\"\n              ? userData?.user?.profileName\n              : selected.memberName,\n          relationship: selected?.id ? selected?.id : `rel-${selected.relationship}`,\n          gender: selected.gender,\n          dob: selected.dob,\n          appointmentFor: selected.relationship == \"self\" ? \"Self\" : \"Loved One\",\n          selectedMember:selected\n        })\n      );\n      let userID =\n        member.relationship == \"self\" ? userData?.user?.userId : member?.id;\n      dispatch(\n        fetch_patient_medicalDetails({\n          userdata: userData?.user,\n          date: appoinment_form,\n          userID: userID,\n        })\n      );\n      progressIncrementer();\n    }\n  };\n\n\n  let getAgeInMonths = (dob) => {\n\n    let months = moment().diff(moment(dob, 'DD/MMM/YYYY'), \"months\")\n    let days = moment().diff(moment(dob, 'DD/MMM/YYYY'), \"days\")\n\n    let result = `${months} months)`\n\n    if (months <= 0) {\n      result = `${days} days)`\n\n    }\n    else {\n\n      result = `${months} months ${moment(new Date()).date()} days)`\n\n    }\n\n\n\n\n\n    return result\n\n  }\n\n  let getAgeInYears = (dob) => {\n\n\n\n    let result = moment()\n      .diff(moment(dob, 'DD/MMM/YYYY'), \"years\")\n      ?.toString()\n\n\n    return `${result} yrs)`\n\n  }\n\n  let handleSelectMember = (e,member) => {\n\n    e.stopPropagation()\n    console.log(\"Setting redux********************\",member);\n    setMember(member)\n\n    Continue(member)\n\n  }\n\n\n  return innerPage == 0 ? (\n    <>\n      <h3 className={Style.book_appointment_main_heading}>\n        Who is this appointment for? <span className=\"mandatory\">*</span>\n      </h3>\n      <div className={Style.memberList}>\n        {memberList &&\n          memberList.length > 0 &&\n          memberList.map((memer, index) => (\n\n            // member?.memberName == memer.memberName?console.log(\"Match\"):null\n\n            <div\n              className={`${Style.book_appointment_person_input} ${(member?.memberName == memer.memberName && member?.id == memer.id) && Style.active\n                }`}\n              onClick={()=>{Continue(memer)}}\n            >\n              <div className={Style.book_appointment_person_img}>\n                <img\n                  src={Assets.person_icon}\n                  className={Style.book_appointment_person_icon_image}\n                ></img>\n                <img\n                  src={Assets.icon_person_blue}\n                  className={Style.book_appointment_person_active_icon_image}\n                ></img>\n              </div>\n\n              <Button\n                className={Style.book_appointment_person_input_box}\n                onClick={(e) =>{handleSelectMember(e,memer)}}\n              >\n                {memer.memberName}{\" \"}\n                {(memer.dob && memer.dob != \"\") &&\n                  `(${memer.gender}, ${moment()\n                    .diff(moment(memer.dob, 'DD/MMM/YYYY'), \"years\") <= 0 ?\n\n                    getAgeInMonths(memer.dob)\n\n                    :\n\n                    getAgeInYears(memer.dob)\n\n                  }\n                  `}\n              </Button>\n              <img\n                src={Assets.pencil_icon}\n                className={Style.book_appointment_pencil_icon_image}\n                onClick={(e) => {\n                  e.stopPropagation()\n                  selectProfile(memer);\n                }}\n              ></img>\n              <img\n                src={Assets.blue_edit_icon}\n                className={Style.book_appointment_pencil_active_image}\n                onClick={(e) => {\n                  e.stopPropagation()\n                  selectProfile(memer);\n                }}\n              ></img>\n            </div>\n          ))}\n\n        <div className={Style.book_appointment_person_input}>\n          <div className={Style.book_appointment_person_img}>\n            <img\n              src={Assets.plus_icon}\n              className={Style.book_appointment_person_icon_image}\n            ></img>\n            <img\n              src={Assets.icon_plus_blue}\n              className={Style.book_appointment_person_active_icon_image}\n            ></img>\n          </div>\n          <Button\n            className={Style.book_appointment_person_input_box}\n            onClick={() => {\n              setAddMemeber(true);\n              setInnerPage(innerPage + 1);\n              setEditDob(false);\n            }}\n          >\n            For someone else\n          </Button>\n          <img\n            src={Assets.right_arrow_icon}\n            className={Style.book_appointment_pencil_icon_image}\n          ></img>\n          <img\n            src={Assets.icon_arrow_blue}\n            className={Style.book_appointment_pencil_active_image}\n          ></img>\n        </div>\n      </div>\n\n      {/* <div className={`${Style.btn_floating} btn_floating`}>\n        <Button\n          className={Style.book_appointment_continue_button}\n          onClick={Continue}\n        >\n          Continue\n        </Button>\n      </div> */}\n    </>\n  ) : !editDob ? (\n    <AddMember setMemberMain={setMember} setInnerPage={setInnerPage} innerPage={innerPage} />\n  ) : (\n    <>\n      <h3 className={Style.book_appointment_main_heading}>Age & Gender</h3>\n      <AgeGender member={member} setMember={setMember} error={error} />\n      <div className={`${Style.btn_floating} btn_floating`}>\n        <Button\n          className={Style.book_appointment_continue_button}\n          onClick={editSubmited}\n        >\n          Continue\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default AppointmentPerson;\n"]},"metadata":{},"sourceType":"module"}